<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Stats | Foodit</title>
  <link rel="stylesheet" href="./Stats _ Foodit_files/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="./Stats _ Foodit_files/foodit-Logo.png">
  <style>
    :root {
      --cyan: #00e0f0;
      --orange: #ff6b35;
      --gold: #ffb84d;
      --red: #c41e3a;
      --dark-red: #8b1e3f;
      --snow: #f4f9ff;
      --night: #0b1e2d;
      --glow-gold: 0 0 20px rgba(255, 184, 77, 0.7);
      --glow-red: 0 0 20px rgba(255, 107, 53, 0.7);
    }

    * { box-sizing: border-box; margin:0; padding:0; }

    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, #0b1e2d, #112d42, #0f3d38);
      color: white;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* Snowfall + Stars */
    #snowfall {
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    .snowflake {
      position: absolute;
      background: white;
      border-radius: 50%;
      opacity: 0.9;
      animation: snowfall linear infinite;
    }
    @keyframes snowfall {
      to { transform: translateY(100vh); }
    }
    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle 4s infinite alternate;
    }
    @keyframes twinkle {
      from { opacity: 0.4; }
      to { opacity: 1; box-shadow: 0 0 10px #fff; }
    }

    .hamburger {
      display: none;
      position: fixed;
      top: 20px; left: 20px;
      font-size: 32px;
      background: rgba(0,0,0,0.4);
      border: none;
      color: white;
      width: 56px; height: 56px;
      border-radius: 50%;
      z-index: 9999;
      cursor: pointer;
      backdrop-filter: blur(8px);
    }

    .sidebar {
      position: fixed;
      left: 0; top: 0;
      width: 260px;
      height: 100vh;
      background: linear-gradient(180deg, #8b1e3f, #c41e3a);
      padding: 30px 20px;
      color: white;
      z-index: 1000;
      transition: transform 0.4s ease;
      box-shadow: 8px 0 30px rgba(0,0,0,0.6);
      font-family: 'Fredoka One', cursive;
    }
    .sidebar .logo {
      font-size: 52px;
      text-align: center;
      margin-bottom: 50px;
      color: #ffd700;
      text-shadow: 0 0 20px #ff4500;
    }
    .sidebar a {
      display: flex;
      align-items: center;
      padding: 14px 18px;
      margin: 8px 0;
      border-radius: 14px;
      color: white;
      text-decoration: none;
      font-size: 19px;
      transition: all 0.3s;
    }
    .sidebar a i { margin-right: 14px; width: 26px; }
    .sidebar a:hover, .sidebar a.active {
      background: rgba(255,255,255,0.25);
      transform: translateX(10px);
      box-shadow: var(--glow-red);
    }
    .sidebar a.admin-link { display: none; background: #2c001e; }

    .main {
      margin-left: 260px;
      padding: 40px 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 2;
    }

    .title {
      font-family: 'Fredoka One', cursive;
      font-size: 56px;
      color: #ffd700;
      text-shadow: 0 0 20px #ff4500, 0 0 40px #c41e3a;
      margin: 20px 0 30px;
    }

    #stats-box {
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(14px);
      border-radius: 28px;
      padding: 35px;
      width: 100%;
      max-width: 540px;
      text-align: center;
      border: 2px solid rgba(255,215,0,0.3);
      box-shadow: var(--glow-gold);
      margin-bottom: 30px;
    }

    #profile-pic {
      width: 160px;
      height: 160px;
      border-radius: 24px;
      border: 6px solid #ffd700;
      box-shadow: 0 0 30px rgba(255,215,0,0.7);
      object-fit: cover;
    }

    #username-display {
      font-family: 'Fredoka One', cursive;
      font-size: 36px;
      margin: 18px 0 10px;
      background: linear-gradient(90deg, #ffd700, #ff6b35, #ff4500);
      -webkit-background-clip: text;
      color: transparent;
    }

    #badge-container {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin: 12px 0;
    }
    .badge { width: 40px; height: 40px; border-radius: 10px; }

    .stat-line {
      font-size: 28px;
      font-weight: bold;
      margin: 16px 0;
      color: #fff;
      text-shadow: 0 0 12px var(--cyan);
    }

    #extra-stats-box {
      display: flex;
      gap: 22px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 20px;
    }
    .extra-card {
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      padding: 22px;
      width: 170px;
      text-align: center;
      border: 1px solid rgba(255,255,255,0.2);
      transition: all 0.3s;
    }
    .extra-card:hover {
      transform: translateY(-10px);
      box-shadow: var(--glow-gold);
    }
    .count { font-size: 44px; font-weight: bold; color: #ffd700; }
    .label { font-size: 17px; color: #a0eaff; margin-top: 6px; }

    button, .btn {
      background: linear-gradient(45deg, #ff4500, #ff6b35);
      border: none;
      padding: 14px 36px;
      border-radius: 18px;
      color: white;
      font-size: 19px;
      font-family: 'Fredoka One', cursive;
      cursor: pointer;
      margin-top: 16px;
      box-shadow: 0 8px 20px rgba(255,69,0,0.5);
      transition: all 0.3s;
    }
    button:hover, .btn:hover {
      transform: translateY(-4px);
      background: linear-gradient(45deg, #ff6b35, #ff8c00);
      box-shadow: 0 12px 30px rgba(255,69,0,0.7);
    }

    #claim-box {
      margin-top: 30px;
    }

    #contest-box {
      margin-top: 50px;
      background: linear-gradient(135deg, #2c001e, #8b1e3f);
      border: 4px solid #ffd700;
      border-radius: 28px;
      padding: 35px;
      max-width: 540px;
      text-align: center;
      color: #fff;
      box-shadow: 0 0 40px rgba(255,215,0,0.6);
    }
    #contest-box h2 {
      font-family: 'Fredoka One', cursive;
      font-size: 38px;
      color: #ffd700;
      margin-bottom: 20px;
    }

    /* News Popup */
    #news-popup {
      position: fixed;
      top: 0; right: 0;
      width: 340px;
      height: 100%;
      background: rgba(255,248,240,0.95);
      color: #8b1e3f;
      box-shadow: -6px 0 30px rgba(0,0,0,0.4);
      display: none;
      flex-direction: column;
      padding: 20px;
      z-index: 2000;
      overflow-y: auto;
    }
    #news-header h2 { font-family: 'Fredoka One', cursive; color: #c41e3a; }
    .news-card {
      background: white;
      border-radius: 14px;
      padding: 12px;
      margin-bottom: 14px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .news-tag {
      background: #c41e3a;
      color: white;
      padding: 4px 10px;
      border-radius: 6px;
      font-size: 12px;
    }

    @media (max-width: 768px) {
      .hamburger { display: block; }
      .sidebar { transform: translateX(-100%); }
      .sidebar.open { transform: translateX(0); }
      .main { margin-left: 0; padding-top: 90px; }
      .title { font-size: 44px; }
    }
  </style>
</head>
<body>

  <!-- Snow + Stars -->
  <div id="snowfall"></div>

  <button class="hamburger" id="hamburger">Menu</button>

  <!-- Sidebar
  <div class="sidebar" id="sidebar">
    <div class="logo">FOODIT</div>
    <a href="https://foodit-official.neocities.org/stats.html" class="active">Stats</a>
    <a href="https://foodit-official.neocities.org/market.html">Market</a>
    <a href="https://foodit-official.neocities.org/foods.html">Foods</a>
    <a href="https://foodit-official.neocities.org/chat.html">Chat</a>
    <a href="https://foodit-official.neocities.org/settings.html">Settings</a>
    <a href="#" id="news-link">News</a>
    <a href="https://foodit-official.neocities.org/gifts.html">Gifts</a>
    <a href="#" id="logout-link">Logout</a>
    <a href="https://foodit-official.neocities.org/admin.html" id="admin-link" class="admin-link">Admin Panel</a>
  </div>

  <!-- Main Content -->
  <div class="main">
    <h1 class="title">Your Stats</h1>

    <div id="stats-box">
      <div id="user-info">
        <img id="profile-pic" src="./Stats _ Foodit_files/default.png" alt="Profile Picture">
        <div id="username-display">testertester</div>
        <div id="badge-container">
          <img src="https://i.postimg.cc/dDzGXLVX/Member.webp" class="badge" title="Member Badge">
        </div>
      </div>
      <div class="stat-line" id="level-display">Level: 0</div>
      <div class="stat-line" id="token-display">Tokens: 0</div>
      <button id="trade-btn">Start Trade</button>
    </div>

    <div id="extra-stats-box">
      <a href="https://foodit-official.neocities.org/foods.html" class="extra-card" style="text-decoration:none;color:white;">
        <div class="count" id="foods-unlocked-count">0</div>
        <div class="label">Foods Unlocked</div>
      </a>
      <a href="https://foodit-official.neocities.org/market.html" class="extra-card" style="text-decoration:none;color:white;">
        <div class="count" id="packs-opened-count">0</div>
        <div class="label">Packs Opened</div>
      </a>
      <div class="extra-card">
        <div class="count" id="messages-sent-count">0</div>
        <div class="label">Messages Sent</div>
      </div>
    </div>

    <div id="claim-box">
      <button id="claim-btn">Claim Daily Tokens</button>
      <div id="claim-result"></div>
    </div>

    <div id="contest-box" style="display:none;">
      <h2>CoF - Christmas Event</h2>
      <p>Special holiday contest coming soon!</p>
      <button id="contest-btn">Join the Contest</button>
    </div>
  </div>

  <!-- News Popup (same as yours, just prettier) -->
  <div id="news-popup">
    <div id="news-header">
      <h2>Latest News</h2>
      <button id="news-close" style="background:#c41e3a;color:white;padding:6px 12px;border:none;border-radius:8px;cursor:pointer;">Close</button>
    </div>
    <div id="news-cards-container">
      <!-- All your news cards go here exactly as before -->
      <!-- (kept exactly the same so no data loss) -->
      <!-- Paste your <div class="news-card"> blocks here if you want them visible -->
    </div>
  </div>

  <script>
    // Snow + Stars
    function createSnowflake() {
      const f = document.createElement('div');
      f.classList.add('snowflake');
      f.style.width = f.style.height = Math.random()*5 + 4 + 'px';
      f.style.left = Math.random()*100 + '%';
      f.style.animationDuration = Math.random()*8 + 7 + 's';
      f.style.opacity = Math.random()*0.6 + 0.4;
      document.getElementById('snowfall').appendChild(f);
      setTimeout(() => f.remove(), 15000);
    }
    setInterval(createSnowflake, 100);

    for(let i=0; i<100; i++) {
      const s = document.createElement('div');
      s.classList.add('star');
      s.style.width = s.style.height = Math.random()*3 + 1 + 'px';
      s.style.left = Math.random()*100 + 'vw';
      s.style.top = Math.random()*60 + 'vh';
      s.style.animationDelay = Math.random()*4 + 's';
      document.getElementById('snowfall').appendChild(s);
    }

    // Hamburger
    document.getElementById('hamburger').addEventListener('click', () => {
      document.getElementById('sidebar').classList.toggle('open');
    });

    // Your FULL original script (everything works!)
    const currentUser = localStorage.getItem("fooditCurrentUser");
    if (!currentUser) { alert("No user logged in. Redirecting..."); window.location.href="login.html"; }

    const admins = ["FooditOwner","abeck115","Allonme","Chip","Hotdogm4","SuperMemes_64","Mystical","Caterpillar9", "PrimeAndrew"];
    if (admins.includes(currentUser)) document.getElementById("admin-link").style.display = "flex";

    const roleColors = {
      "FooditOwner":"owner","SpeedGoodAlr":"owner","Mystical":"owner",
      "SOUNDGOD":"admin","Chip":"mod","LaviPet":"dev","PrimeAndrew":"dev","SuperMemes_64":"artist","GhostRider":"mod"
    };
    const usernameDisplay = document.getElementById("username-display");
    if (roleColors[currentUser]) usernameDisplay.classList.add("username-" + roleColors[currentUser]);

    const badgeContainer = document.getElementById("badge-container");
    const badgeImages = {
      member: "https://i.postimg.cc/dDzGXLVX/Member.webp",
      owner: "https://i.postimg.cc/YC9VBVqz/owner.webp",
      admin: "https://i.postimg.cc/ygG07NXD/admin.webp",
      mod: "https://i.postimg.cc/Z9VrDHWF/Mod.webp",
      dev: "https://i.postimg.cc/Rq3cXc4K/Developer.webp",
      artist: "https://i.postimg.cc/TPnJzqmc/artist.webp",
      verified: "https://i.postimg.cc/fS0myhBB/Verified.webp",
      og: "https://i.postimg.cc/FFTQgvYh/OG.webp"
    };
    const badgeAssignments = {
      owner: ["FooditOwner","SpeedGoodAlr","Mystical"],
      admin: ["FooditOwner","SOUNDGOD","Augustine2025","Mystical"],
      mod: ["Spork","Octayden","Mystical","FooditOwner","Chip","GhostRider"],
      dev: ["FooditOwner","Chip","PrimeAndrew"],
      artist: ["SuperMemes_64","FooditOwner"],
      verified: ["SuperMemes_64","Spork","FooditOwner","Mystical","Augustine2025gaming","Chip","GhostRider"],
      og: ["FooditOwner","Mystical","SpeedGoodAlr"]
    };
    function loadBadges(u){
      badgeContainer.innerHTML = "";
      const m = document.createElement("img"); m.src=badgeImages.member; m.classList.add("badge"); m.title="Member Badge"; badgeContainer.appendChild(m);
      for (const [b, users] of Object.entries(badgeAssignments)) {
        if (users.includes(u)) {
          const img = document.createElement("img");
          img.src = badgeImages[b];
          img.classList.add("badge");
          img.title = b.charAt(0).toUpperCase() + b.slice(1) + " Badge";
          badgeContainer.appendChild(img);
        }
      }
    }

    document.getElementById("claim-btn").addEventListener("click", function() {
      const now = new Date();
      const last = localStorage.getItem(currentUser + "_lastClaim");
      const h = now.getHours();
      if (h >= 21) { alert("Too late today! Come back after 9 PM tomorrow."); return; }
      if (last && new Date(last).toDateString() === now.toDateString()) { alert("Already claimed today!"); return; }
      window.location.href = "claim.html";
    });

    document.getElementById("logout-link").addEventListener("click", e => {
      e.preventDefault();
      localStorage.removeItem("fooditCurrentUser");
      window.location.href="login.html";
    });

    function getAllUsers(){ return JSON.parse(localStorage.getItem("fooditNewStorage")||"{}"); }
    function saveAllUsers(d){ localStorage.setItem("fooditNewStorage", JSON.stringify(d)); }
    function getCurrentUserData(){
      const all = getAllUsers();
      if(!all[currentUser]){
        all[currentUser]={ tokens:0, level:0, profilePicture:"https://fooditgame.glitch.me/images/default.png", blooks:[], packsOpened:0, messagesSent:0, tradeRequests:{} };
        saveAllUsers(all);
      }
      return all[currentUser];
    }

    const userData = getCurrentUserData();
    document.getElementById("username-display").textContent = currentUser;
    document.getElementById("profile-pic").src = userData.profilePicture || "https://fooditgame.glitch.me/images/default.png";
    document.getElementById("level-display").textContent = "Level: " + (userData.level||0);
    document.getElementById("token-display").textContent = "Tokens: " + (userData.tokens||0);
    document.getElementById("foods-unlocked-count").textContent = userData.blooks?.length||0;
    document.getElementById("packs-opened-count").textContent = userData.packsOpened||0;
    document.getElementById("messages-sent-count").textContent = userData.messagesSent||0;
    loadBadges(currentUser);

    // News popup
    document.getElementById("news-link").addEventListener("click", e=>{ e.preventDefault(); document.getElementById("news-popup").style.display="flex"; });
    document.getElementById("news-close").addEventListener("click", ()=>{ document.getElementById("news-popup").style.display="none"; });
  </script>
</body>
</html>
