<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Stats | Foodit ‚ùÑÔ∏è</title>
  <link rel="stylesheet" href="./Stats _ Foodit_files/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Montserrat:wght@500;700&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="./Stats _ Foodit_files/foodit-Logo.png">
  <style>
    :root {
      --primary-cyan: #00e0f0;
      --orange: #ff6b35;
      --gold: #ffd700;
      --dark-red: #8b1e3f;
      --snow: #f4f9ff;
      --deep-green: #0b3d38;
      --glow: 0 0 25px rgba(255, 255, 255, 0.5);
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Montserrat', sans-serif;
      background: linear-gradient(135deg, #0b1e3d, #1a3b5d, #0f2d38), url('https://m.media-amazon.com/images/I/810l91uOF5L.jpg') center/cover fixed;
      color: #fff;
      min-height: 100vh;
      overflow-x: hidden;
      position: relative;
    }

    /* Snowfall & Stars Container */
    #snowfall {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }

    .snowflake {
      position: absolute;
      background: white;
      border-radius: 50%;
      opacity: 0.9;
      pointer-events: none;
      animation: snowfall linear infinite;
    }

    @keyframes snowfall {
      to { transform: translateY(100vh) rotate(360deg); }
    }

    .star {
      position: absolute;
      background: white;
      border-radius: 50%;
      animation: twinkle 4s infinite alternate;
    }

    @keyframes twinkle {
      from { opacity: 0.5; }
      to { opacity: 1; box-shadow: 0 0 12px #ffd700; }
    }

    .falling-food {
      position: absolute;
      width: 60px;
      height: 60px;
      pointer-events: none;
      animation: fall linear infinite;
      z-index: 0;
    }

    @keyframes fall {
      from { transform: translateY(-100px); }
      to { transform: translateY(110vh); }
    }

    .hamburger {
      display: none;
      position: fixed;
      top: 20px;
      left: 20px;
      font-size: 32px;
      background: rgba(0,0,0,0.4);
      border: none;
      color: white;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      z-index: 9999;
      cursor: pointer;
      backdrop-filter: blur(10px);
    }

    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      width: 260px;
      height: 100vh;
      background: linear-gradient(to bottom, #8b1e3f, #b82e54);
      padding: 30px 20px;
      color: white;
      z-index: 1000;
      transition: transform 0.4s ease;
      box-shadow: 5px 0 20px rgba(0,0,0,0.5);
      font-family: 'Fredoka One', cursive;
    }

    .sidebar .logo {
      font-size: 48px;
      text-align: center;
      margin-bottom: 40px;
      color: #ffd700;
      text-shadow: 0 0 15px #ff6b35;
    }

    .sidebar a {
      display: flex;
      align-items: center;
      padding: 14px 16px;
      margin: 8px 0;
      border-radius: 12px;
      color: white;
      text-decoration: none;
      font-size: 19px;
      transition: all 0.3s;
    }

    .sidebar a i { margin-right: 12px; width: 24px; }

    .sidebar a:hover, .sidebar a.active {
      background: rgba(255,255,255,0.2);
      transform: translateX(8px);
      box-shadow: var(--glow);
    }

    .sidebar a.admin-link { display: none; background: #2c0b1e; }

    .main {
      margin-left: 260px;
      padding: 40px 20px;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
      z-index: 2;
    }

    .title {
      font-family: 'Fredoka One', cursive;
      font-size: 52px;
      color: #ffd700;
      text-shadow: 0 0 20px #ff6b35, 0 0 40px #ff4500;
      margin-bottom: 30px;
    }

    #stats-box, .extra-card, #claim-box, #contest-box {
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(15px);
      -webkit-backdrop-filter: blur(15px);
      border-radius: 24px;
      border: 1px solid rgba(255,255,255,0.2);
      box-shadow: var(--glow);
    }

    #stats-box {
      padding: 35px;
      width: 100%;
      max-width: 540px;
      text-align: center;
    }

    #profile-pic {
      width: 160px;
      height: 160px;
      border-radius: 20px;
      border: 6px solid #ffd700;
      box-shadow: 0 0 30px rgba(255,215,0,0.6);
      object-fit: cover;
    }

    #username-display {
      font-family: 'Fredoka One', cursive;
      font-size: 34px;
      margin: 15px 0;
      background: linear-gradient(90deg, #ffd700, #ff6b35, #ff4500);
      -webkit-background-clip: text;
      color: transparent;
    }

    #badge-container {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin: 12px 0;
    }

    .badge { width: 40px; height: 40px; border-radius: 10px; }

    .stat-line {
      font-size: 28px;
      margin: 15px 0;
      font-weight: bold;
      color: #fff;
      text-shadow: 0 0 12px var(--primary-cyan);
    }

    #extra-stats-box {
      display: flex;
      gap: 25px;
      margin-top: 40px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .extra-card {
      padding: 25px;
      width: 170px;
      text-align: center;
      transition: transform 0.3s;
    }

    .extra-card:hover { transform: translateY(-10px); }

    .count { font-size: 44px; font-weight: bold; color: #ffd700; }

    .label { font-size: 17px; color: #c0eaff; margin-top: 8px; }

    button, .btn {
      background: linear-gradient(45deg, #ff4500, #ff6b35);
      border: none;
      padding: 14px 34px;
      border-radius: 16px;
      color: white;
      font-size: 18px;
      font-family: 'Fredoka One', cursive;
      cursor: pointer;
      margin-top: 20px;
      box-shadow: 0 6px 18px rgba(255,69,0,0.4);
      transition: all 0.3s;
    }

    button:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 28px rgba(255,69,0,0.6);
      background: linear-gradient(45deg, #ff6b35, #ff8c00);
    }

    #claim-box { padding: 25px; margin-top: 30px; max-width: 540px; text-align: center; }

    #contest-box {
      margin-top: 40px;
      background: linear-gradient(135deg, #2c0b1e, #8b1e3f);
      border: 3px solid #ffd700;
      padding: 35px;
      max-width: 540px;
      text-align: center;
      color: #fff;
    }

    #contest-box h2 {
      font-family: 'Fredoka One', cursive;
      font-size: 38px;
      color: #ffd700;
      margin-bottom: 15px;
    }

    @media (max-width: 768px) {
      .hamburger { display: block; }
      .sidebar { transform: translateX(-100%); }
      .sidebar.open { transform: translateX(0); }
      .main { margin-left: 0; padding: 90px 15px 40px; }
      .title { font-size: 42px; }
      #extra-stats-box { gap: 15px; }
      .extra-card { width: 140px; }
    }
  </style>
</head>
<body>

  <div id="snowfall"></div>

  <button class="hamburger" id="hamburger">‚ò∞</button>

  <div class="sidebar" id="sidebar">
    <div class="logo">FOODIT</div>
    <a href="https://foodit-official.neocities.org/stats.html" class="active"><i class="fas fa-chart-line"></i> Stats</a>
    <a href="https://foodit-official.neocities.org/market.html"><i class="fas fa-store"></i> Market</a>
    <a href="https://foodit-official.neocities.org/foods.html"><i class="fas fa-utensils"></i> Foods</a>
    <a href="https://foodit-official.neocities.org/chat.html"><i class="fas fa-comment"></i> Chat</a>
    <a href="https://foodit-official.neocities.org/settings.html"><i class="fas fa-gear"></i> Settings</a>
    <a href="#" id="news-link"><i class="fas fa-newspaper"></i> News</a>
    <a href="https://foodit-official.neocities.org/gifts.html"><i class="fas fa-gift"></i> Gifts</a>
    <a href="#" id="logout-link"><i class="fas fa-sign-out"></i> Logout</a>
    <a href="https://foodit-official.neocities.org/admin.html" id="admin-link" class="admin-link"><i class="fas fa-user-shield"></i> Admin Panel</a>
  </div>

  <div class="main">
    <h1 class="title">Your Stats ‚ùÑÔ∏èüéÑ</h1>

    <div id="stats-box">
      <div id="user-info">
        <img id="profile-pic" src="./Stats _ Foodit_files/default.png" alt="Profile Picture">
        <div id="username-display">testertester</div>
        <div id="badge-container">
          <img src="./Stats _ Foodit_files/Member.webp" class="badge" title="Member Badge">
        </div>
      </div>
      <div class="stat-line" id="level-display">Level: 0</div>
      <div class="stat-line" id="token-display">Tokens: 0</div>
      <button id="trade-btn">Start Trade</button>
    </div>

    <div id="extra-stats-box">
      <div class="extra-card">
        <div class="count" id="foods-unlocked-count">0</div>
        <div class="label">Foods Unlocked</div>
      </div>
      <div class="extra-card">
        <div class="count" id="packs-opened-count">0</div>
        <div class="label">Packs Opened</div>
      </div>
      <div class="extra-card">
        <div class="count" id="messages-sent-count">0</div>
        <div class="label">Messages Sent</div>
      </div>
    </div>

    <div id="claim-box">
      <button id="claim-btn">Claim Daily Tokens</button>
      <div id="claim-result"></div>
    </div>

    <div id="contest-box" style="display:none;">
      <h2>CoF</h2>
      <p>Play the difficult word puzzle game on October 24th only!</p>
      <button id="contest-btn">Join the Contest</button>
    </div>
  </div>

  <!-- News Popup (kept from original, slightly styled) -->
  <div id="news-popup" style="position:fixed;top:0;right:0;width:320px;height:100%;background:#fff3e0;color:#b25500;box-shadow:-4px 0 20px rgba(0,0,0,0.2);display:none;flex-direction:column;padding:15px;z-index:2000;overflow-y:auto;font-family:'Montserrat',sans-serif;">
    <div id="news-header" style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;">
      <h2 style="font-family:'Fredoka One',cursive;margin:0;font-size:22px;">Latest News</h2>
      <button id="news-close" style="background:#b25500;color:white;border:none;padding:6px 10px;cursor:pointer;border-radius:4px;">Close</button>
    </div>
    <div id="news-cards-container"></div>
  </div>

  <script>
    // Snowflakes
    function createSnowflake() {
      const flake = document.createElement('div');
      flake.classList.add('snowflake');
      flake.style.width = flake.style.height = Math.random() * 8 + 4 + 'px';
      flake.style.left = Math.random() * 100 + 'vw';
      flake.style.animationDuration = Math.random() * 6 + 8 + 's';
      flake.style.opacity = Math.random() * 0.6 + 0.4;
      document.getElementById('snowfall').appendChild(flake);
      setTimeout(() => flake.remove(), 20000);
    }
    setInterval(createSnowflake, 100);

    // Twinkling Stars
    for (let i = 0; i < 100; i++) {
      const star = document.createElement('div');
      star.classList.add('star');
      star.style.width = star.style.height = Math.random() * 3 + 1 + 'px';
      star.style.left = Math.random() * 100 + 'vw';
      star.style.top = Math.random() * 50 + 'vh';
      star.style.animationDelay = Math.random() * 4 + 's';
      document.getElementById('snowfall').appendChild(star);
    }

    // Falling Festive Foods (Christmas Blook-style)
    const festiveFoods = [
      "./Stats _ Foodit_files/Holiday-Cat-1.png",
      "./Stats _ Foodit_files/Holiday-Frog-1.png",
      "./Stats _ Foodit_files/Golden-Hot-Chocolate-1.png",
      "./Stats _ Foodit_files/desert-Snowglobe.png",
      // Add more of your local holiday food images here if you have them
    ];

    function createFallingFood() {
      const food = document.createElement('img');
      food.src = festiveFoods[Math.floor(Math.random() * festiveFoods.length)];
      food.classList.add('falling-food');
      food.style.left = Math.random() * 100 + '%';
      food.style.animationDuration = (6 + Math.random() * 6) + 's';
      food.style.opacity = 0.8;
      document.body.appendChild(food);
      setTimeout(() => food.remove(), 15000);
    }
    setInterval(createFallingFood, 800);

    // Hamburger Toggle
    document.getElementById('hamburger').addEventListener('click', () => {
      document.getElementById('sidebar').classList.toggle('open');
    });

    // News Popup
    document.getElementById('news-link').addEventListener('click', (e) => {
      e.preventDefault();
      document.getElementById('news-popup').style.display = 'flex';
    });
    document.getElementById('news-close').addEventListener('click', () => {
      document.getElementById('news-popup').style.display = 'none';
    });

    // ====== ALL YOUR ORIGINAL SCRIPT BELOW (unchanged) ======
    const currentUser = localStorage.getItem("fooditCurrentUser");
    if (!currentUser) { alert("No user logged in. Redirecting to login."); window.location.href="login.html"; }

    const admins = ["FooditOwner","abeck115","Allonme","Chip","Hotdogm4","SuperMemes_64","Mystical","Caterpillar9", "PrimeAndrew üëÖ"];
    if (admins.includes(currentUser)) document.getElementById("admin-link").style.display = "flex";

    const roleColors = {
      "FooditOwner":"owner",
      "SpeedGoodAlr":"owner",
      "Mystical":"owner",
      "SOUNDGOD":"admin",
      "Chip":"mod",
      "LaviPet":"dev",
      "PrimeAndrew üëÖ":"dev",
      "SuperMemes_64":"artist",
      "GhostRider":"mod"
    };
    const usernameDisplay = document.getElementById("username-display");
    if (roleColors[currentUser]) usernameDisplay.classList.add("username-" + roleColors[currentUser]);

    const badgeContainer = document.getElementById("badge-container");
    const badgeImages = {
      member: "https://i.postimg.cc/dDzGXLVX/Member.webp",
      owner: "https://i.postimg.cc/YC9VBVqz/owner.webp",
      admin: "https://i.postimg.cc/ygG07NXD/admin.webp",
      mod: "https://i.postimg.cc/Z9VrDHWF/Mod.webp",
      dev: "https://i.postimg.cc/Rq3cXc4K/Developer.webp",
      artist: "https://i.postimg.cc/TPnJzqmc/artist.webp",
      verified: "https://i.postimg.cc/fS0myhBB/Verified.webp",
      og: "https://i.postimg.cc/FFTQgvYh/OG.webp"
    };
    const badgeAssignments = {
      owner: ["FooditOwner","SpeedGoodAlr","Mystical"],
      admin: ["FooditOwner","SOUNDGOD","Augustine2025","Mystical"],
      mod: ["Spork","Octayden","Mystical","FooditOwner", "Chip", "GhostRider"],
      dev: ["FooditOwner", "Chip", "PrimeAndrew üëÖ"],
      artist: ["SuperMemes_64", "FooditOwner"],
      verified: ["SuperMemes_64","Spork","FooditOwner","Mystical","Augustine2025gaming", "Chip", "GhostRider"],
      og: ["FooditOwner","Mystical","SpeedGoodAlr"]
    };
    function loadBadges(username){
      badgeContainer.innerHTML = "";
      const memberBadge = document.createElement("img");
      memberBadge.src = badgeImages.member;
      memberBadge.classList.add("badge");
      memberBadge.title = "Member Badge";
      badgeContainer.appendChild(memberBadge);
      for (const [badge, users] of Object.entries(badgeAssignments)) {
        if (users.includes(username)) {
          const img = document.createElement("img");
          img.src = badgeImages[badge];
          img.classList.add("badge");
          img.title = badge.charAt(0).toUpperCase() + badge.slice(1) + " Badge";
          badgeContainer.appendChild(img);
        }
      }
    }

    document.getElementById("claim-btn").addEventListener("click", function() {
      const now = new Date();
      const lastClaimed = localStorage.getItem(currentUser + "_lastClaim");
      const currentTime = now.getHours();
      if (currentTime >= 21) {
        alert("You can no longer claim tokens for today.");
        return;
      }
      if (lastClaimed && new Date(lastClaimed).toDateString() === now.toDateString()) {
        alert("Already claimed.");
        return;
      }
      window.location.href = "claim.html";
      localStorage.setItem(currentUser + "_lastClaim", now.toString());
    });

    document.getElementById("logout-link").addEventListener("click", function(e){
      e.preventDefault();
      localStorage.removeItem("fooditCurrentUser");
      window.location.href="login.html";
    });

    function getAllUsers(){ return JSON.parse(localStorage.getItem("fooditNewStorage")||"{}"); }
    function saveAllUsers(data){ localStorage.setItem("fooditNewStorage", JSON.stringify(data)); }
    function getCurrentUserData(){
      const allUsers=getAllUsers();
      if(!allUsers[currentUser]){
        allUsers[currentUser]={ tokens:0, level:0, profilePicture:"https://fooditgame.glitch.me/images/default.png", blooks:[], packsOpened:0, messagesSent:0, tradeRequests:{} };
        saveAllUsers(allUsers);
      }
      return allUsers[currentUser];
    }
    function saveCurrentUserData(data){ const allUsers=getAllUsers(); allUsers[currentUser]=data; saveAllUsers(allUsers); }

    const userData = getCurrentUserData();
    document.getElementById("username-display").textContent = currentUser;
    document.getElementById("profile-pic").src = userData.profilePicture || "./Stats _ Foodit_files/default.png";
    document.getElementById("level-display").textContent = "Level: " + (userData.level||0);
    document.getElementById("token-display").textContent = "Tokens: " + (userData.tokens||0);
    document.getElementById("foods-unlocked-count").textContent = userData.blooks?.length || 0;
    document.getElementById("packs-opened-count").textContent = userData.packsOpened||0;
    document.getElementById("messages-sent-count").textContent = userData.messagesSent||0;

    loadBadges(currentUser);

    // News cards container (your original news stays if you copy them back)
    // For now, it's empty ‚Äì paste your news cards HTML if needed
  </script>
</body>
</html>
