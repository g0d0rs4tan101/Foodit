<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard â€¢ Foodit</title>
  <link href="https://fonts.googleapis.com/css2?family=Titan+One&display=swap" rel="stylesheet"/>
  <style>
    body { font-family:'Titan One',cursive; background:#fff8f0; color:#ff6a00; margin:0; min-height:100vh; }
    .header { background:linear-gradient(135deg,#ff7f11,#ffae00); padding:40px; text-align:center; color:white; }
    h1 { font-size:80px; margin:0; text-shadow:4px 4px 0 #c43e00; }
    .user { font-size:50px; margin:20px; }
    .content { display:flex; flex-wrap:wrap; padding:40px; gap:40px; max-width:1400px; margin:0 auto; }
    .card { background:white; border-radius:30px; padding:30px; box-shadow:0 15px 35px rgba(0,0,0,0.2); flex:1; min-width:300px; }
    .btn { display:block; margin:20px auto; padding:20px 60px; background:#ff4e00; color:white; font-size:35px; border:none; border-radius:25px; cursor:pointer; box-shadow:0 12px 0 #c43e00; transition:0.2s; }
    .btn:hover { transform:translateY(8px); box-shadow:0 4px 0 #b33a00; }
    .logout { background:#d63b00; }
    #chat { height:400px; overflow-y:scroll; background:#fff; border-radius:20px; padding:20px; margin:20px 0; }
    #chat p { margin:8px 0; padding:10px; background:#ffeacc; border-radius:15px; display:inline-block; max-width:80%; }
    #chat p.me { background:#ff6a00; color:white; text-align:right; float:right; clear:both; }
    input[type=text] { width:100%; padding:15px; font-size:20px; border-radius:20px; border:none; margin-top:10px; }
  </style>
</head>
<body>
  <div class="header">
    <h1>Foodit Dashboard</h1>
    <div class="user" id="user">Loading...</div>
  </div>

  <div class="content">
    <div class="card">
      <h2>Play Game</h2>
      <button class="btn">Coming Soon!</button>
      <button class="btn">Leaderboard</button>
      <button class="btn logout" onclick="logout()">Logout</button>
    </div>

    <div class="card">
      <h2>Global Chat</h2>
      <div id="chat"></div>
      <input type="text" id="msg" placeholder="Type a message..." onkeypress="if(event.key==='Enter') send()" />
    </div>
  </div>

  <script>
    const user = localStorage.getItem("foodit_user");
    if (!user) location.href = "login.html";
    document.getElementById("user").textContent = user;

    function logout() {
      localStorage.removeItem("foodit_user");
      location.href = "index.html";
    }

    // Simple real-time chat using localStorage (shared across tabs)
    const chat = document.getElementById("chat");
    const messages = JSON.parse(localStorage.getItem("foodit_chat") || "[]");

    function renderChat() {
      chat.innerHTML = messages.map(m => 
        `<p class="${m.user === user ? 'me' : ''}"><strong>${m.user}:</strong> ${m.text}</p>`
      ).join("");
      chat.scrollTop = chat.scrollHeight;
    }

    function send() {
      const input = document.getElementById("msg");
      const text = input.value.trim();
      if (!text) return;
      messages.push({ user, text, time: Date.now() });
      localStorage.setItem("foodit_chat", JSON.stringify(messages));
      input.value = "";
      renderChat();
    }

    renderChat();
    setInterval(renderChat, 2000); // Auto-refresh chat
  </script>
</body>
</html>
